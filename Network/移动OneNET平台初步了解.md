# 移动OneNET平台初步了解

之前公司有支持过电信的NB平台，目前着手对接移动平台，现在对此平台做初步了解，在此简单记录。

具体内容请参见官方开发文档：<https://open.iot.10086.cn/doc/>

## 一、平台介绍

> OneNET定位为PaaS服务，即在物联网应用和真实设备之间搭建高效、稳定、安全的应用平台。

### 主要功能

平台的主要功能主要为：

* 设备接入：支持多种行业和主流标准协议的设备接入
* 设备管理：支持设备的生命周期（注册/更新/查询/删除）、在线状态、数据存储、调试及日志
* 数据及访问安全
* API支持：通过简单调用快速实现应用
* 应用集成工具：提供消息队列MQ和HTTP推送服务
* 简易应用孵化工具

详情参见：<https://open.iot.10086.cn/doc/book/introduce/introduce.html>

### 平台架构

![](https://open.iot.10086.cn/doc/images/%E5%B9%B3%E5%8F%B0%E6%9E%B6%E6%9E%84new1.png)

**设备接入**

平台提供多种协议完成设备接入，OneNET建议根据不同的场景选择合适的协议：

* `LwM2M（CoAP）`：低能耗广覆盖场景
* `MQTT`：需要与设备实时通信的场景
* `Modbus`：工业modbus通信场景，建议DTU+modbus
* `HTTP/HTTPS`：设备单纯上报数据的场景
* `TCP`：用户需要自定义协议接入的场景，建议采用TCP+脚本的方式接入



**设备管理**

OneNET平台针对不同的使用场景，提供关于设备的包括生命周期管理、在线状态监测、在线调试、数据管理等功能在内的丰富的设备管理功能。

**API**

提供基于HTTP/HTTPS的API接口，用户可以使用API进行设备管理，数据查询，设备命令交互等操作，在API的基础上，根据自己的个性化需求指定搭建上层应用。

**HTTP推送**

针对某些实时性要求较高的场景提供数据推送功能。**可以过滤掉设备端频繁的周期性上报数据，将用户关心的实时性较高的数据，通过HTTP/HTTPS的方式推送到用户的应用服务器上。**

**消息队列MQ**

为满足应用层快速可靠地获取设备消息而推出的消息中间件服务。用户可自定义消息生产者和消费者。

**安全认证**



详情参见：<https://open.iot.10086.cn/doc/book/introduce/architecture.html>

### 资源模型

![](https://open.iot.10086.cn/doc/images/%E8%B5%84%E6%BA%90%E6%A8%A1%E5%9E%8B.png)

产品相当于项目

详情参见：<https://open.iot.10086.cn/doc/book/introduce/resource-model.html>

## 二、快速开始

### 注册登录

用户可自行进行注册，注册的用户可以进行认证，认证分为企业认证和个人认证。

认证与产品之间的关系：

| 认证方式     | 允许创建产品总数 | 每个产品接入设备总数 |
| ------------ | ---------------- | -------------------- |
| 未实名认证   | 3                | 10                   |
| 完成个人认证 | 10               | 1000                 |
| 完成企业认证 | 暂不限制         | 暂不限制             |

详情参见：<https://open.iot.10086.cn/doc/book/easy-manual/login.html>

### 创建产品（项目）和设备

详情参见：<https://open.iot.10086.cn/doc/book/easy-manual/product&device/product-create.html>

### 数据流与数据点

平台通过数据流与数据点来组织设备上行数据，如图：

![](https://open.iot.10086.cn/doc/images/%E6%95%B0%E6%8D%AE%E6%B5%81%E4%B8%8E%E6%95%B0%E6%8D%AE%E7%82%B91.png)

设备上传并存储数据时，必须以`key-value`的格式上传数据，其中`key`即为数据流(stream)名称，`value`为实际存储的数据点(point)，`value`格式可以为`int`、`float`、`string`、`json`等多种自定义格式。

在实际应用中，数据流可以被用于分类描述设备的某一类属性数据，例如温度，湿度，坐标等信息，用户可以自定义数据流的数据范围，将**相关性较高的数据**归类为一个数据流。

### 应用管理

可以在OneNET平台上快速实现设备的数据流可视化。

实现方式是通过平台提供的控件进行具体的实现，控件分为：

* 基础控件：只能可视化设备的数据流值，不能对设备下发命令、修改数据流值。
* 控制控件：除了能可视化设备的数据流值外，还可以下发命令给设备。

### 消息队列MQ

目前为公测阶段。

消息队列MQ定位为OneNET设备接入服务使用的，用于实现应用层快速、即时、可靠地获取设备消息的**物联网服务组件**，服务模型如下：

![](https://open.iot.10086.cn/doc/images/mq/MQ%E6%A6%82%E8%BF%B0new.png)

### HTTP推送

平台提供HTTP推送功能，可以主动将设备相关数据与消息以HTTP/HTTPS POST请求的方式，发送给应用服务器。

## 设备开发



## 应用开发