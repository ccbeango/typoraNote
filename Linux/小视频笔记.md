# 小视频笔记

[TOC]

看的兄弟连小视频，好早以前的，不过我还是坚持看完吧，了解下Linux基础。

# 1.Linux系统简介

## 1.1.1 UNIX发展历史和发行版本

**历史简介:**

* 1965 年，美国麻省理工学院（ MIT ）、通用电气公司（ GE ）及 AT & T 的贝尔实验室联合开发 Multies 工程计划，其目标是开发一种交互式的具有多道程序处理能力的分时操作系统，但因 MulticS 追求的目标过于庞大复杂，项目进度远远落后于计划，最后贝尔实验室宣布退出。
*   1969 年，美国贝尔实验室的肯 · 汤普森在 DEC PDP 一 7 机器上开发出了 UNIX 系统。
* 1971年，肯·汤普森的同事丹尼斯·里发明了C语言；1973年，UNIX系统的绝大部分源代码用C语言重写，这为提高UNIX系统的可移植性打下基础。

**发行版本：**

| 操作系统    | 公司                | 硬件平台             |
| ------- | ----------------- | ---------------- |
| AIX     | IBM               | PowerPC          |
| HP-UX   | HP                | PA-RISC          |
| Solaris | Sun               | SPARC            |
| Linux   | Red HAt、Ubuntu... | IA(Intel、ADM...) |

## 1.1.2 Linux发展历史和发行版本

​	Linux系统诞生于1991年，由芬兰大学生李纳斯（LinusTorvalds)和后来陆续加入的众多爱好者共同开发完成。
Linux是开源软件，源代码开放的UNIX。

* Linux内核官网：www.kernel.org


* Linux主要发行版本：RedHat、CentOS、SuSE、fedora、gentoo linux、Mandriva、turbolinux、红旗、 debian、ubuntu、KNOPPIX

# 2.Linux系统安装

##  2.1 VMware虚拟机安装与使用

VMware是一个虚拟PC的软件，可以在现有的操作系统上虚拟出一个新的硬件环境，相当于模拟出一台新的PC，以此来实现在一台机器上真正同时运行两个独立的操作系统。

> VMware官方网站 http://www.vmware.com

VMware主要特点：

* 不需要分区或重新开机就能在同一台PC上使用两种以上的操作系统
* 本机系统可以与虚拟机系统网络通信
* 可以设定并且随时修改虚拟机操作系统的硬件环境

VMware建议配置：

* CPU：建议主频1GHz以上
* 内存：建议1GB以上
* 硬盘：建议分区空闲空间8GB以上

## 2.2 安装

安装欢迎界面

* Install or upgrade an existing system : 安装或升级现有系统
* Install system with basic video driver: 安装过程采用基本的显卡驱动
* Resuce install system : 进入系统修复模式
* Boot from local deive : 退出安装从硬盘启动
* Memory test ：存储介质检测

软件包选择

* Desktop(桌面)
* Minimal Desktop(最小化桌面)
* Minimal(最小化)
* Basic Server(基本服务器)
* Database Server (数据库服务器)
* Web Server(网页服务器)
* Virtual Host(虚拟主机)
* software development workstation(软件开发工作站) 

安装日志

* /root/install.log : 存储了安装在系统中的软件包及其版本信息
* /root/install.log.syslog : 存储了安装过程中留下的事件记录
* /root/anaconda-ks.cfg : 以Kickstart配置文件的格式记录安装过程中设置的选项信息

# 3.初学建议

## 3.1 注意事项

1. Linux严格区分大小写


2. Linux中所有内容以文件形式保存，包括硬件
   * 硬盘文件是/dev/sd[a-p]
   * 光盘文件是/dev/srO等

## 3.2 Linux各目录的作用

在终端运行`ls /`可看到如下内容:

```shell
[mcee@mcee ~]$ ls /
bin   dev  home  lib64  mnt  proc  run   srv  tmp  var
boot  etc  lib   media  opt  root  sbin  sys  usr
```

###树状目录结构：

![./images/1.jpg](./images/linux系统目录结构.jpg)



### 树状目录结构解释：

- **/bin**/

  - bin是Binary的缩写, 这个目录存放着最经常使用的命令。
  - 存放系统命令的目录，普通用户和超级用户都可以执行。不过，放在/bin下的命令在单用户模式下也可以执行。

- **/sbin/**

  - s就是Super User的意思，这里存放的是系统管理员使用的系统管理程序。
  - 保存和系统环境设置相关的命令，只有超级用户可以使用这些命令进行系统环境设置，但是有些命令可以允许普通用户查看。

- **/usr/bin/**

  - 系统用户使用的应用程序。
  - 存放系统命令目录，普通用户和超级用户都可以执行。这些命令和系统启动无关，在单用户模式下不能执行。

- **/usr/sbin/**

  - 超级用户使用的比较高级的管理程序和系统守护程序。
  - 存放根文件系统不必要的系统管理命令，例如多数服务程序。只有超级用户可以使用。大家其实可以注意到Linux的系统，在所有“sbin” 目录中保存的命令只有超级用户可以使用，“bin”目录中保存的命令所有用户都可以使用。

- **/boot/**

  - 这里存放的是启动Linux时使用的一些核心文件，包括一些连接文件以及镜像文件。
  - 系统启动目录，保存系统启动相关的文件，如内核文件和启动引导程序（grub）文件等。

- **/dev/**

  - dev是Device(设备)的缩写, 该目录下存放的是Linux的外部设备，在Linux中访问设备的方式和访问文件的方式是相同的。
  - 设备文件保存位置。Linux中所有内容以文件方式保存，包括硬件。这个目录就是用来保存所有硬件设备文件的。

- **/etc/**

  - 这个目录用来存放所有的系统管理所需要的配置文件和子目录。
  - 配置文件保存位置。系统内所有采用默认安装方式（rpm安装）的服务的配置文件都保存在这个目录中，如用户账户和密码、服务的启动脚本、常用服务的配置文件等。

- **/home/**

  - 用户的主目录，在Linux中，每个用户都有一个自己的目录，一般该目录名是以用户的账号命名的。
  - 普通用户的家目录。建立每个用户时，每个用户要有一个默认登录位置，这个位置就是用户的家目录，所有普通用户的家目录就是在/home下建立一个和用户名相同的目录。

- **/lib/**

  - 这个目录里存放着系统最基本的动态连接共享库，其作用类似于Windows里的DLL文件。几乎所有的应用程序都需要用到这些共享库。
  - 系统调用的函数库保存位置

- **/lost+found/**

  - 这个目录一般情况下是空的，当系统非法关机后，这里就存放了一些文件。
  - 当系统意外崩溃或机器意外关机，而产生一些文件碎片放在这里。当系统启动的过程中fsck工具会检查这里，并修复已经损坏的文件系统。这个目录只在每个分区中出现，例如/lost+found就是根分区的备份回复目录；/bootlost+found就是/boot分区的备份恢复目录

- **/media/**

  - linux系统会自动识别一些设备，例如U盘、光驱等等，当识别后，linux会把识别的设备挂载到这个目录下。
  - 挂载目录。系统建议用户挂载媒体设备的，例如软盘和光盘

- **/mnt/**

  - 系统提供该目录是为了让用户临时挂载别的文件系统的，可以将光驱挂载在/mnt/上，然后进入该目录就可以查看光驱里的内容了。
  - 挂载目录。早起Linux中只有这一个挂载目录，并没有细分。现在这个目录系统建议挂载额外设备，如U盘，移动硬盘和其他操作系统的分区

- **/misc/**

  - 挂载目录。系统建议用来挂载NFS服务的共享目录。

- **/opt/**

  - 这是给主机额外安装软件所摆放的目录。比如你安装一个ORACLE数据库则就可以放到这个目录下。默认是空的。
  - 第三方安装的软件保存位置。这个目录就是放置和安装其他软件的位置，手工安装的源码包软件都可以安装在这个目录中。
  - 安装在/usr/local/中挺好的，可以不安装在这里，习惯问题

- **/proc/** 

  - 这个目录是一个虚拟的目录，它是系统内存的映射，我们可以通过直接访问这个目录来获取系统信息。这个目录的内容不在硬盘上而是在内存里，我们也可以直接修改里面的某些文件，比如可以通过下面的命令来屏蔽主机的ping命令，使别人无法ping你的机器：

    ```shell
    echo 1 > /proc/sys/net/ipv4/icmp_echo_ignore_all
    ```

  - 虚拟文件系统。该目录中的数据并不保存在硬盘中，而是保存到内存中。主要保存系统的内核、进程、外部设备状态和网络状态灯。如/proc/cpuinfo是保存CPU信息的、/proc/devices是保存设备驱动的列表的、/proc/filesystems是保存文件系统列表的、/proc/net/是保存网络协议信息的

- **/sys/**

  - 虚拟文件系统。和/proc目录相似，都是保存在内存当中的，主要是保存内核相关信息的

- **/root/**

  - 该目录为系统管理员，也称作超级权限者的用户主目录。

- **/srv/**

  - 该目录存放一些服务启动之后需要提取的数据。
  - 服务数据目录。一些系统服务启动之后，可以在这个目录中保存所需要的数据

- **/tmp/**

  - 这个目录是用来存放一些临时文件的。
  - 临时目录。系统存放临时文件的目录，该目录下所有用户都可以访问和写入。

- **/usr/**

  - 这是一个非常重要的目录，用户的很多应用程序和文件都放在这个目录下，类似于windows下的program files目录。
  - 系统软件资源目录。是“Unix Software Resource”的缩写，所以存放系统软件资源的目录。系统中安装的软件大多数保存在这里。

- **/usr/src**

  - 内核源代码默认的放置目录

- **/var/**

  - 动态数据保存位置。主要保存缓存、日志以及软件运行所产生的文件。

### 其他

​	在linux系统中，有几个目录是比较重要的，平时需要注意不要误删除或者随意更改内部文件。

`/etc`： 上边也提到了，这个是系统中的配置文件，如果你更改了该目录下的某个文件可能会导致系统不能启动。

`/bin, /sbin, /usr/bin, /usr/sbin`: 这是系统预设的执行文件的放置目录，比如 ls 就是在/bin/ls 目录下的。

值得提出的是，/bin, /usr/bin 是给系统用户使用的指令（除root外的通用户），而/sbin, /usr/sbin 则是给root使用的指令。

`/var`： 这是一个非常重要的目录，系统上跑了很多程序，那么每个程序都会有相应的日志产生，而这些日志就被记录到这个目录下，具体在/var/log 目录下，另外mail的预设放置也是在这里。

## 3.3 服务器注意事项



1. 远程服务器不允许关机，只能重启
2. 重启时应该关闭服务
3. 不要在服务器访问高峰运行高负载命令
4. 重启时应该关闭服务
5. 制定合理的密码规范并定期更新
6. 合理分配权限
7. 定期备份重要数据和日志

# 4.常用命令

## 4.0 命令格式与目录处理命令ls



**命令格式: **  命令 -选项  [参数]

​	例:ls -la /etc

**说明:**

 	1. 个别命令使用不遵循此格式
 	2. 当有多个选项时，可以写在一起
 	3. 简化选项与完整选项-a 等于 --all



### ls

| 名称   | 说明                       |
| ---- | ------------------------ |
| 命令名称 | ls                       |
| 原意   | list                     |
| 所在路径 | /bin/ls                  |
| 执行权限 | 所有用户                     |
| 功能描述 | 显示目录文件                   |
| 语法   | `ls 选项 [-aldih] [文件或目录]` |

**选项说明：**	

​	-a 显示所有文件，包括隐藏文件

​	-l 详细信息显示

​	-d 查看目录属性

​        -i  选项是查看文件的i节点，系统中每个文件都有自己唯一的i节点犹如每个人的身份证号 

​	-h 选项是人性化显示信息

**ls打印文件含义：**

![](./images/Linux小视频01.png)

`-rw-r--r—`含义：

* 第一个`-` 文件类型(`-` 文件 `d` 目录 `l` 软链接文件)，然后每三个为一组`rw- r-- r—`分别表示u所有者  g所属组  o其他人的权限，r读 w写 x执行；
* 之后的含义依次是： 文件计数、所有者、所属组、文件大小、文件最后修改时间、文件名		



## 4.1 文件处理命令

### mkdir

| 名称   | 说明               |
| ---- | ---------------- |
| 命令名称 | mkdir            |
| 原意   | make directories |
| 所在路径 | /bin/mkdir       |
| 执行权限 | 所有用户             |
| 功能描述 | 创建新目录            |
| 语法   | `mkdir -p [目录名]` |

**选项说明：**

​	-p 递归创建

范例: 

```shell
$ mkdir -p /tmp/Japan/boduo

$ mkdir /tmp/Japan/longze /tmp/Japan/cangjing
```

### cd

| 名称   | 说明               |
| ---- | ---------------- |
| 命令名称 | cd               |
| 原意   | change directory |
| 所在路径 | shell内置命令        |
| 执行权限 | 所有用户             |
| 功能描述 | 切换目录             |
| 语法   | `cd [目录名]`       |

范例：

```shell
$ cd /tmp/Japan/boduo 切换到指定目录
$ cd .. 回到上一级目录
```

### pwd

| 名称   | 说明                      |
| ---- | ----------------------- |
| 命令名称 | pwd                     |
| 原意   | print working directory |
| 所在路径 | /bin/pwd                |
| 执行权限 | 所有用户                    |
| 功能描述 | 显示当前目录                  |
| 语法   | `pwd`                   |

### rmdir

| 名称   | 说明                     |
| ---- | ---------------------- |
| 命令名称 | rmdir                  |
| 原意   | remove empty directory |
| 所在路径 | /bin/rmdir             |
| 执行权限 | 所有用户                   |
| 功能描述 | 删除空目录                  |
| 语法   | `rmdir [目录名]`          |

范例： 

```shell
$ rmdir /tmp/Japan/boduo
```

### cp

| 名称   | 说明                      |
| ---- | ----------------------- |
| 命令名称 | cp                      |
| 原意   | copy                    |
| 所在路径 | /bin/cp                 |
| 执行权限 | 所有用户                    |
| 功能描述 | 复制文件或目录                 |
| 语法   | `cp -rp [原文件或目录][目标目录]` |

**选项说明：**	

​	-r 复制目录

​	-p 保留文件属性

范例：

```shell
#将目录/tmp/Japan/cangjing复制到目录/root下
$ cp -r /tmp/Japan/cangjing /root

#将/tmp/Japan目录下的boduo和longze目录复制到 /root下，保持目录属性
$ cp -rp /tmp/Japan/boduo /tmp/Japan/longze /root
```

### mv

| 名称   | 说明                  |
| ---- | ------------------- |
| 命令名称 | mv                  |
| 原意   | move                |
| 所在路径 | /bin/mv             |
| 执行权限 | 所有用户                |
| 功能描述 | 剪切文件、改名             |
| 语法   | `mv [原文件或目录][目标目录]` |

### rm

| 名称   | 说明               |
| ---- | ---------------- |
| 命令名称 | rm               |
| 原意   | remove           |
| 所在路径 | /bin/rm          |
| 执行权限 | 所有用户             |
| 功能描述 | 剪切文件、改名          |
| 语法   | `mv -rf [文件或目录]` |

**选项说明：**	

​	-r 删除目录

​	-f 强制执行

范例:

```shell
#删除文件/tmp/yum.log
$ rm /tmp/yum.log

#删除目录/tmp/Japan/longze
$ rm -rf /tmp/Japan/longze
```

## 4.2 权限管理命令



##4.3 文件搜索命令

##4.4 帮助命令

##4.5 用户管理命令

##4.6 压缩解压命令

##4.7 网络命令

##4.8 关机重启命令



